// build_options: 
Good Programming Practices for Performance - Best Practices
===========================================================
Arnauld Van Muysewinkel <avm@pendragon.be>
v0.1, 21-Nov-2016: First version
:backend: slidy
//:theme: volnitsky
:data-uri:
ifdef::env-build[:icons: font]
:extension: adoc
//extension may be overriden by compile.sh
:copyright: Creative-Commons-Zero (Arnauld Van Muysewinkel)


Content
-------

* <<_references,References>>
* <<_introduction,Introduction>>
* <<_general_recommendations,General Recommendations>>
* <<_ejb,EJB>>
* <<_sessions,Sessions>>
* <<_caching,Caching>>
* <<_conclusion,Conclusion>>

_(link:0.0-training_plan.{extension}#_extras[back to plan])_


References
----------

This presentation is derived from:

* http://centers.intranext.smals.be/SIC/Wiki/Pages/WIKI_Best_Practices_for_Performance.aspx[SIC Wiki / Best Practices for Performance]
* Résumé de la Formation Oracle Performance Tuning. Romain Genon. Smals / SIC. 2015
* JPA Concepts. Yannick Majoros. Smals / SIC. 14-Nov-2014

Other useful source of information:

* Top 10 Causes of Java EE Enterprise Performance Problems (https://dzone.com/articles/top-10-causes-java-ee)

Introduction
------------

These recommendations apply to JEE development.

*****
IMPORTANT: Do-not-reinvent-the-wheel
*****


General recommendations
-----------------------

NOTE: Never, ever, use non-final static variables

(Note: constants, loggers must be final static variables)


NOTE: Don't rely on default locale:

no Locale.setDefault(), no Locale.getDefault(), no new formatter without passing a Locale; see jdss wiki


EJB
---

NOTE: Don't use Remote EJB if not needed (performance impact!)

* Remote EJB entails serialization/deserialization
* Prefer local EJB


Sessions
--------

NOTE: Sessions must be serializable:

* all objects under the session must be serializable (whole objects graph!)
* avoid big objects in the session
* Use DTO's

Actually, the potential issues are the same as for JSF ViewContext.


Caching
-------

NOTE: Avoid using any custom-made cache.

* There are potential issues with caches (stuck threads, memory leaks)
* Use only recommended out-of-the-shelf solution (RB has approved usage of Inifinispan for local caches)
* Discuss it with review board
* Do not use a HashMap to share information between several threads:
** you cannot make it synchronized (see above, <<_concurrency,Concurrency>>)
** and, when it's not synchronized, there is a risk of infinite loop with Java version < 8 (http://bugs.java.com/view_bug.do?bug_id=7027300) (see also, for example, https://dzone.com/articles/java-7-hashmap-vs)


Conclusion
----------

IMPORTANT: Remember to check regularly SIC Wiki / Best Practices for Performance:

http://centers.intranext.smals.be/SIC/Wiki/Pages/WIKI_Best_Practices_for_Performance.aspx[
http://centers.intranext.smals.be/SIC/Wiki/Pages/]
http://centers.intranext.smals.be/SIC/Wiki/Pages/WIKI_Best_Practices_for_Performance.aspx[
WIKI_Best_Practices_for_Performance.aspx]

image:images/Perry_The_Platypus-210x140.png[width=30] http://c.xkcd.com/random/comic/[.]


:numbered!:
That's all folks!
-----------------

[cols="^",grid="none",frame="none"]
|=====
|image:images/thats-all-folks.png[link="#(1)"]
|=====
